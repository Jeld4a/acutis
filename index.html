<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <title>T√Ωdenn√≠ ot√°zka ‚Äî kv√≠z</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }
    .container {
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      max-width: 560px;
      width: 100%;
      text-align: center;
    }
    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin: 12px 0;
      box-sizing: border-box;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    button {
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      background: #2f8fef;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover { filter: brightness(0.95); }
    #result { margin-top: 14px; font-weight: 600; min-height: 22px; }
    /* Modal / video overlay */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
    }
    .video-card {
      background: #000;
      border-radius: 10px;
      max-width: 900px;
      width: 100%;
      overflow: hidden;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
      position: relative;
    }
    .video-card video, .video-card iframe {
      width: 100%;
      height: 100%;
      display: block;
      aspect-ratio: 16 / 9;
    }
    .close-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(255,255,255,0.85);
      color: #000;
      border: none;
      border-radius: 6px;
      padding: 6px 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container" id="quiz">
    <h2>T√Ωdenn√≠ ot√°zka</h2>
    <p id="question">Naƒç√≠t√°m ot√°zku‚Ä¶</p>

    <input type="text" id="answer" placeholder="Va≈°e odpovƒõƒè" autocomplete="off" />
    <br/>
    <button id="submitBtn">Odpovƒõdƒõt</button>

    <p id="result"></p>
    <small style="display:block;margin-top:8px;color:#666">Ot√°zka se mƒõn√≠ automaticky ka≈æd√Ω t√Ωden.</small>
  </div>

  <!-- Overlay s videem (vyber jednu z variant n√≠≈æe ‚Äî localVideo nebo youtubeIframe) -->
  <div class="overlay" id="overlay">
    <div class="video-card" role="dialog" aria-modal="true" aria-label="Oslavn√© video">
      <button class="close-btn" id="closeVideo">Zav≈ô√≠t ‚úï</button>

      <!-- VARIANTA A: lok√°ln√≠ MP4 (nahraj do repozit√°≈ôe do slo≈æky /video/congrats.mp4) -->
      <video id="localVideo" controls playsinline>
        <source src="video/congrats.mp4" type="video/mp4">
        V√°≈° prohl√≠≈æeƒç nepodporuje p≈ôehr√°v√°n√≠ videa.
      </video>

      <!-- VARIANTA B: YouTube (pokud chce≈° pou≈æ√≠t YouTube, odkomentuj iframe a zakomentuj <video>) -->
      <!--
      <iframe id="youtubeIframe"
              src="https://www.youtube.com/embed/VIDEO_ID?autoplay=1&rel=0"
              title="Oslavn√© video"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen>
      </iframe>
      -->
    </div>
  </div>

  <script>
    // --- ot√°zky (uprav podle pot≈ôeby) ---
    const questions = [
      { q: "Kolik je 3 + 4?", a: "7" },
      { q: "Jak√© je hlavn√≠ mƒõsto ƒåesk√© republiky?", a: "Praha" },
      { q: "Kolik m√° mƒõs√≠c≈Ø jeden rok?", a: "12" },
      { q: "Jak√° je chemick√° znaƒçka vody?", a: "H2O" },
      { q: "Kolik stran m√° ƒçtverec?", a: "4" },
      { q: "Jak√Ω je n√°zev na≈°eho planet√°rn√≠ho domova?", a: "Zemƒõ" },
      { q: "Barva oblohy ve dne za dobr√©ho poƒças√≠?", a: "modr√°" },
      { q: "Jak se ≈ôekne 'ano' v angliƒçtinƒõ?", a: "yes" },
      { q: "Poƒçet dn√≠ v t√Ωdnu?", a: "7" },
      { q: "Kolik je 10 - 3?", a: "7" }
    ];

    // Z√≠sk√°n√≠ ƒç√≠sla t√Ωdne (ISO week)
    function getWeekNumber(d) {
      d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
      d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));
      const yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
      const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
      return weekNo;
    }

    const today = new Date();
    const week = getWeekNumber(today);
    const idx = week % questions.length;
    const currentQuestion = questions[idx];

    // Napln√≠me ot√°zku do DOM
    document.getElementById('question').textContent = currentQuestion.q;

    // UI prvky
    const answerEl = document.getElementById('answer');
    const resultEl = document.getElementById('result');
    const submitBtn = document.getElementById('submitBtn');
    const overlay = document.getElementById('overlay');
    const localVideo = document.getElementById('localVideo');
    const closeVideo = document.getElementById('closeVideo');

    // Hlavn√≠ kontrola odpovƒõdi
    function checkAnswer() {
      const userAnswer = answerEl.value.trim();
      if (!userAnswer) {
        resultEl.textContent = "Napi≈° odpovƒõƒè, pros√≠m.";
        resultEl.style.color = "orange";
        return;
      }

      if (userAnswer.toLowerCase() === currentQuestion.a.toLowerCase()) {
        // spr√°vnƒõ
        resultEl.textContent = "Spr√°vnƒõ! üéâ Pust√≠m video‚Ä¶";
        resultEl.style.color = "green";

        // otev≈ôeme overlay s videem ‚Äî u≈æivatelsk√° interakce (kliknut√≠) povol√≠ p≈ôehr√°n√≠
        showVideo();
      } else {
        resultEl.textContent = "≈†patnƒõ, zkus to znovu.";
        resultEl.style.color = "red";
      }
    }

    submitBtn.addEventListener('click', checkAnswer);

    // Enter v inputu tak√© odpov√≠d√°
    answerEl.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        checkAnswer();
      }
    });

    // Funkce: zobrazit video overlay a spustit video
    function showVideo() {
      // Vyber variantu, podle toho co chce≈° spou≈°tƒõt.
      overlay.style.display = 'flex';

      // VARIANTA A: lok√°ln√≠ <video> - play() spust√≠me explicitnƒõ
      if (localVideo) {
        try {
          // restartujeme video od zaƒç√°tku a spust√≠me
          localVideo.currentTime = 0;
          // play() je vol√°no v r√°mci u≈æivatelsk√© akce (kliknut√≠), proto by mƒõlo fungovat i se zvukem
          const playPromise = localVideo.play();
          if (playPromise !== undefined) {
            playPromise.catch((err) => {
              // pokud playback z nƒõjak√©ho d≈Øvodu zam√≠tnut ‚Äî zti≈°√≠me a zkus√≠me znova
              console.warn('Probl√©m s p≈ôehr√°n√≠m videa:', err);
              localVideo.muted = true;
              localVideo.play().catch(()=>{});
            });
          }
        } catch (e) {
          console.error('Chyba p≈ôi spu≈°tƒõn√≠ videa', e);
        }
      }

      // VARIANTA B: YouTube iframe ‚Äî pokud pou≈æ√≠v√°≈° YouTube, nastav src s parametrem autoplay=1
      // Pokud chce≈° YouTube variantu, odkomentuj iframe v HTML a nahraƒè VIDEO_ID v src.
    }

    // Zav≈ô√≠t video a zastavit p≈ôehr√°v√°n√≠
    closeVideo.addEventListener('click', () => {
      overlay.style.display = 'none';

      // zastav√≠me lok√°ln√≠ video
      if (localVideo && !localVideo.paused) {
        localVideo.pause();
        try { localVideo.currentTime = 0; } catch(e){ /* ignorovat */ }
      }

      // pokud pou≈æ√≠v√°≈° YouTube iframe, m≈Ø≈æe≈° nastavit src="" nebo reloadovat iframe, aby se zastavilo
      const yt = document.getElementById('youtubeIframe');
      if (yt) {
        // vyresetov√°n√≠m src se video zastav√≠
        const src = yt.src;
        yt.src = src; // jednoduch√Ω refresh
      }

      // p≈ô√≠padnƒõ vyƒçistit odpovƒõƒè a v√Ωsledek
      // answerEl.value = '';
      // resultEl.textContent = '';
    });

    // Kliknut√≠ mimo video tak√© zav≈ôe (pokud chce≈°)
    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) closeVideo.click();
    });

    // -> volitelnƒõ: pokud chce≈° automaticky skr√Ωt formul√°≈ô p≈ôi p≈ôehr√°v√°n√≠
    // document.getElementById('quiz').style.display = 'none';
  </script>
</body>
</html>
